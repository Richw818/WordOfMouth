{% extends 'recipes/base.html' %}

{% block content %}
{% load socialaccount %}

<html>
<head>
    <h1 class = "font-weight-bold">
        {{ recipe.recipe_name }}
    </h1>
    <h3>Description: </h3>
    <p>{{ recipe.recipe_description }}</p>
    <!-- <a href = "{% url 'edit_description' recipe.id %}">Edit Description</a> -->
    <img src="https://wordofmouth-images.s3.us-east-2.amazonaws.com/{{ recipe.recipe_image }}" width = "250" height = "250" />
    <br>
    <form action = "{% url 'edit_image' recipe.id %}" method = "post" enctype="multipart/form-data">
        {% csrf_token %}
        <input id="recipe_image" type="file" accept="image/*" name="recipe_image"/>
        <br>
        <input type = "submit" value = "Update Image">
    </form>
    
</head>
<body>

    <div class = "text-left" id = "recipe-info">

        {% if recipe.recipe_reference %}
        <a href = "{% url 'detail' recipe.recipe_reference %}">This is a forked recipe. View the original recipe here</a>
        {% endif %}

        <h3>Equipment: </h1>
             {{ recipe.recipe_equipment }}
         <h3>Ingredients: </h1>
            {{ recipe.recipe_ingredients }}
        <h3>Instructions: </h1>
            {{ recipe.recipe_instructions }}
        <br>
        <!-- <h3>Instruction List: </h3> -->
        <!-- <ul>
            {% for ri in recipe.recipeinstruction_set.all %}
                <li>{{ ri.instruction_text }}</li>
            {% endfor %}
        </ul> -->
        <a href = "{% url 'edit_recipe' recipe.id %}">Edit Recipe</a>
        <br>
        <a href = "{% url 'fork' recipe.id %}">Fork Recipe</a>
        </br>
        <form action="{% url 'favorite_recipe' %}" method="post">
            {% csrf_token %}
            {% if is_favorited %}
                <button type="submit" name="recipe_id" value="{{ recipe.id }}" class="btn btn-primary" style="background-color:gray">Unfavorite</button>
            {% else %}
                <button type="submit" name="recipe_id" value="{{ recipe.id }}" class="btn btn-primary">Favorite</button>
            {% endif %}
        </form>
    </div>

</body>
</html>

{% endblock %}
